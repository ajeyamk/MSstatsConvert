# R for travis: see documentation at https://docs.travis-ci.com/user/languages/r

language: R
cache: packages
warnings_are_errors: false

[skip travis] Update README

after_success:
  - Rscript -e 'covr::codecov()'

deploy:
- provider: s3
  access_key_id: $AWS_ACCESS_ID
  secret_access_key: $AWS_SECRET_KEY
  local_dir: deployment
  skip_cleanup: true
  on: &2
    repo: ajeyamk/MSstatsConvert
  bucket: nu-ov-lab-datasets
  region: us-east-1
- provider: codedeploy
  access_key_id: $AWS_ACCESS_ID
  secret_access_key: $AWS_SECRET_KEY
  bucket: nu-ov-lab-datasets
  key: latest.zip
  bundle_type: zip
  application: NU-OV-lab-Rstudio-ec2
  deployment_group: NU-OV-lab-Rstudio-ec2
  region: us-east-1
  on: *2
script:
  - zip -r latest *
  - mkdir -p deployment
  - mv latest.zip deployment/latest.zip
